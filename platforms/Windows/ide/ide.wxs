<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">
  <Product
      Language="1033"
      Manufacturer="!(loc.ManufacturerName)"
      Name="!(loc.Ide_ProductName)"
      UpgradeCode="$(IdeUpgradeCode)"
      Version="$(NonSemVerProductVersion)"
      Id="*"
      UpgradeCode="$(var.IdeUpgradeCode)">

    <Package
      Id="*"
      InstallerVersion="200"
      Compressed="yes"
      InstallScope="$(var.PackageScope)" />

    <Media Id="1" Cabinet="ide.cab" EmbedCab="$(var.ArePackageCabsEmbedded)" />

    <WixVariable Id="SideBySidePackageUpgradeCode" Value="$(var.IdeUpgradeCode)" />
    <FeatureRef Id="IDETools" />

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLLOCATION" Name="YourAppFolder">
          <Directory Id="usr_include" Name="_usr_include">
            <Directory Id="usr_include_SourceKit" Name="SourceKit" />
          </Directory>
          <Directory Id="usr_bin" Name="_usr_bin">
            <Component Id="ClangdComponent" Guid="*">
              <File Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clangd.exe" />
            </Component>
            <Component Id="LldbComponent" Guid="*">
              <File Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb-dap.exe" />
            </Component>
            <Component Id="SourceKitdComponent" Guid="*">
              <File Source="$(var.TOOLCHAIN_ROOT)\usr\bin\sourcekitdInProc.dll" />
            </Component>
            <Component Id="LspComponent" Guid="*">
              <File Source="$(var.DEVTOOLS_ROOT)\usr\bin\sourcekit-lsp.exe" />
            </Component>
          </Directory>
          <Directory Id="usr_lib" Name="_usr_lib">
            <Component Id="SourceKitdLibComponent" Guid="*">
              <File Source="$(var.TOOLCHAIN_ROOT)\usr\lib\sourcekitdInProc.lib" />
            </Component>
          </Directory>
          <Directory Id="usr_include_SourceKit">
            <Component Id="SourceKitIncludeComponent" Guid="*">
              <File Source="$(var.TOOLCHAIN_ROOT)\usr\include\SourceKit\sourcekitd.h" />
            </Component>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <Feature Id="IDETools" Title="!(loc.Ide_ProductName)" Level="1">
      <ComponentRef Id="ClangdComponent" />
      <ComponentRef Id="LldbComponent" />
      <ComponentRef Id="SourceKitdComponent" />
      <ComponentRef Id="LspComponent" />
      <ComponentRef Id="SourceKitdLibComponent" />
      <ComponentRef Id="SourceKitIncludeComponent" />
    </Feature>
  </Product>
</Wix>
