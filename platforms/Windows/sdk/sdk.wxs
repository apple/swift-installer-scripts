<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs" xmlns:ui="http://wixtoolset.org/schemas/v4/wxs/ui">
  <?include ../shared/config.wxi?>

  <?if $(var.ProductArchitecture) = "amd64"?>
    <?define ArchBinDir = "bin64"?>
    <?define ArchArchDir = "x86_64"?>
    <?define ArchTriple = "x86_64-unknown-windows-msvc"?>
  <?elseif $(var.ProductArchitecture) = "arm64"?>
    <?define ArchBinDir = "bin64a"?>
    <?define ArchArchDir = "aarch64"?>
    <?define ArchTriple = "aarch64-unknown-windows-msvc"?>
  <?elseif $(var.ProductArchitecture) = "arm"?>
    <?define ArchBinDir = "bin32a"?>
    <?define ArchArchDir = "armv7"?>
    <?define ArchTriple = "armv7-unknown-windows-msvc"?>
  <?elseif $(var.ProductArchitecture) = "x86"?>
    <?define ArchBinDir = "bin32"?>
    <?define ArchArchDir = "i686"?>
    <?define ArchTriple = "i686-unknown-windows-msvc"?>
  <?endif?>

  <Package
      Language="1033"
      Manufacturer="swift.org"
      Name="!(loc.Sdk_ProductName_$(var.ProcessorArchitecture))"
      UpgradeCode="4c37a396-d9e2-490a-89b7-0a3d271d847f"
      Version="$(var.ProductVersion)"
      Scope="$(PackageScope)">

    <Media Id="1" Cabinet="sdk.cab" EmbedCab="yes" />
    <MajorUpgrade DowngradeErrorMessage="!(loc.DowngradeError)" />

    <!--
      %ProgramFiles64Folder%
        └─ Swift
            └─ Platforms
                └─ Windows.platform
                    └─ Developer
                        ├─ Library
                        │   └─ XCTest-development
                        │       └─ ...
                        └─ SDKs
                            └─ Windows.sdk
                                    └─ ...
    -->
    <DirectoryRef Id="Platforms">
      <Directory Id="WindowsPlatform" Name="Windows.platform">
        <Directory Name="Developer">
          <Directory Name="Library">
            <!-- XCTest -->
            <!--
              FIXME(compnerd) this should actually be the proper version
              of XCTest, and needs to be reflected in the plist as well.
            -->
            <Directory Name="XCTest-development">
              <Directory Name="usr">
                <Directory Id="XCTest_usr_bin" Name="$(var.ArchBinDir)"></Directory>
                <Directory Name="lib">
                  <Directory Name="swift">
                    <Directory Name="windows">
                      <Directory Id="XCTest_usr_lib_swift_windows_ARCH" Name="$(var.ArchArchDir)" />
                      <Directory Id="XCTest.swiftmodule" Name="XCTest.swiftmodule" />
                    </Directory>
                  </Directory>
                </Directory>
              </Directory>
            </Directory>
          </Directory>
          <Directory Name="SDKs">
            <!-- Windows.sdk -->
            <Directory Id="WindowsSDK" Name="Windows.sdk">
              <Directory Name="usr">
                <Directory Name="include">
                  <Directory Id="WindowsSDK_usr_include_Block" Name="Block" />
                  <Directory Id="WindowsSDK_usr_include_dispatch" Name="dispatch" />
                  <Directory Id="WindowsSDK_usr_include_os" Name="os" />
                  <Directory Name="swift">
                    <Directory Id="WindowsSDK_usr_include_swift_SwiftRemoteMirror" Name="SwiftRemoteMirror" />
                  </Directory>
                </Directory>
                <Directory Name="lib">
                  <Directory Name="swift">
                    <Directory Id="WindowsSDK_usr_lib_swift_shims" Name="shims" />
                    <Directory Id="WindowsSDK_usr_lib_swift_windows" Name="windows">
                      <Directory Id="_Concurrency.swiftmodule" Name="_Concurrency.swiftmodule" />
                      <Directory Id="_Differentiation.swiftmodule" Name="_Differentiation.swiftmodule" />
                      <Directory Id="_RegexParser.swiftmodule" Name="_RegexParser.swiftmodule" />
                      <Directory Id="_StringProcessing.swiftmodule" Name="_StringProcessing.swiftmodule" />
                      <Directory Id="CRT.swiftmodule" Name="CRT.swiftmodule" />
                      <Directory Id="Cxx.swiftmodule" Name="Cxx.swiftmodule" />
                      <Directory Id="Distributed.swiftmodule" Name="Distributed.swiftmodule" />
                      <Directory Id="Dispatch.swiftmodule" Name="Dispatch.swiftmodule" />
                      <Directory Id="Foundation.swiftmodule" Name="Foundation.swiftmodule" />
                      <Directory Id="FoundationNetworking.swiftmodule" Name="FoundationNetworking.swiftmodule" />
                      <Directory Id="FoundationXML.swiftmodule" Name="FoundationXML.swiftmodule" />
                      <Directory Id="Swift.swiftmodule" Name="Swift.swiftmodule" />
                      <Directory Id="SwiftOnoneSupport.swiftmodule" Name="SwiftOnoneSupport.swiftmodule" />
                      <Directory Id="WinSDK.swiftmodule" Name="WinSDK.swiftmodule" />
                      <Directory Id="WindowsSDK_usr_lib_swift_windows_ARCH" Name="$(var.ArchArchDir)" />
                    </Directory>
                  </Directory>
                </Directory>
                <Directory Id="WindowsSDK_usr_share" Name="share" />
              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </DirectoryRef>

    <ComponentGroup Id="XCTest">
      <Component Directory="XCTest_usr_bin">
        <File Source="$(var.PLATFORM_ROOT)\Developer\Library\XCTest-development\usr\bin\XCTest.dll" />
      </Component>
      <Component Directory="XCTest_usr_lib_swift_windows_ARCH">
        <File Source="$(var.PLATFORM_ROOT)\Developer\Library\XCTest-development\usr\lib\swift\windows\XCTest.lib" />
      </Component>
      <Component Directory="XCTest.swiftmodule">
        <File Name="$(var.ArchTriple).swiftdoc" Source="$(var.PLATFORM_ROOT)\Developer\Library\XCTest-development\usr\lib\swift\windows\$(var.ArchArchDir)\XCTest.swiftdoc" />
      </Component>
      <Component Directory="XCTest.swiftmodule">
        <File Name="$(var.ArchTriple).swiftmodule" Source="$(var.PLATFORM_ROOT)\Developer\Library\XCTest-development\usr\lib\swift\windows\$(var.ArchArchDir)\XCTest.swiftmodule" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="SwiftRemoteMirror" Directory="WindowsSDK_usr_include_swift_SwiftRemoteMirror">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\include\swift\SwiftRemoteMirror\MemoryReaderInterface.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\include\swift\SwiftRemoteMirror\Platform.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\include\swift\SwiftRemoteMirror\SwiftRemoteMirror.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\include\swift\SwiftRemoteMirror\SwiftRemoteMirrorTypes.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\include\swift\SwiftRemoteMirror\module.modulemap" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftRemoteMirror.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="BlocksRuntime">
      <Component Directory="WindowsSDK_usr_include_Block">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\Block\Block.h" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\BlocksRuntime.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="libdispatch" Directory="WindowsSDK_usr_include_dispatch">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\base.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\block.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\data.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\dispatch.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\group.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\introspection.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\io.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\module.modulemap" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\object.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\once.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\queue.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\semaphore.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\source.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\dispatch\time.h" />
      </Component>
      <Component Directory="WindowsSDK_usr_include_os">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\os\generic_base.h" />
      </Component>
      <Component Directory="WindowsSDK_usr_include_os">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\os\generic_unix_base.h" />
      </Component>
      <Component Directory="WindowsSDK_usr_include_os">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\os\generic_win_base.h" />
      </Component>
      <Component Directory="WindowsSDK_usr_include_os">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\os\object.h" />
      </Component>
      <Component Directory="Dispatch.swiftmodule">
        <File Name="$(var.ArchTriple).swiftdoc" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\Dispatch.swiftdoc" />
      </Component>
      <Component Directory="Dispatch.swiftmodule">
        <File Name="$(var.ArchTriple).swiftmodule" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\Dispatch.swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\dispatch.lib" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\swiftDispatch.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="_Concurrency" Directory="_Concurrency.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Concurrency.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Concurrency.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Concurrency.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swift_Concurrency.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="_Differentiation" Directory="_Differentiation.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Differentiation.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Differentiation.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_Differentiation.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swift_Differentiation.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="_RegexParser" Directory="_RegexParser.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_RegexParser.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_RegexParser.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_RegexParser.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swift_RegexParser.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="_StringProcessing" Directory="_StringProcessing.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_StringProcessing.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_StringProcessing.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\_StringProcessing.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swift_StringProcessing.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="CRT" Directory="CRT.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\CRT.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\CRT.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\CRT.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftCRT.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Cxx" Directory="Cxx.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Cxx.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Cxx.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Cxx.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftCxx.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Distributed" Directory="Distributed.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Distributed.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Distributed.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Distributed.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftDistributed.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Foundation" Directory="Foundation.swiftmodule">
      <Component>
        <File Name="$(var.ArchTriple).swiftdoc" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\Foundation.swiftdoc" />
      </Component>
      <Component>
        <File Name="$(var.ArchTriple).swiftmodule" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\Foundation.swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Foundation.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="FoundationNetworking" Directory="FoundationNetworking.swiftmodule">
      <Component>
        <File Name="$(var.ArchTriple).swiftdoc" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\FoundationNetworking.swiftdoc" />
      </Component>
      <Component>
        <File Name="$(var.ArchTriple).swiftmodule" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\FoundationNetworking.swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\FoundationNetworking.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="FoundationXML" Directory="FoundationXML.swiftmodule">
      <Component>
        <File Name="$(var.ArchTriple).swiftdoc" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\FoundationXML.swiftdoc" />
      </Component>
      <Component>
        <File Name="$(var.ArchTriple).swiftmodule" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\FoundationXML.swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\FoundationXML.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Swift" Directory="Swift.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Swift.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Swift.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\Swift.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftCore.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="SwiftOnoneSupport" Directory="SwiftOnoneSupport.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\SwiftOnoneSupport.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\SwiftOnoneSupport.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\SwiftOnoneSupport.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftSwiftOnoneSupport.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="WinSDK" Directory="WinSDK.swiftmodule">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\WinSDK.swiftmodule\$(var.ArchTriple).swiftdoc" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\WinSDK.swiftmodule\$(var.ArchTriple).swiftinterface" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\WinSDK.swiftmodule\$(var.ArchTriple).swiftmodule" />
      </Component>
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftWinSDK.lib" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="libcxxshim" Directory="WindowsSDK_usr_lib_swift_windows">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\libcxxshim.h" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\libcxxshim.modulemap" />
      </Component>
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\libcxxstdlibshim.h" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Registrar" Directory="WindowsSDK_usr_lib_swift_windows_ARCH">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftrt.obj" />
      </Component>
      <!--
      <Component Directory="WindowsSDK_usr_lib_swift_windows_ARCH" Id="swiftrtd.obj">
        <File Id="swiftrtd.obj" Source="$(var.SDK_ROOT)\usr\lib\swift\windows\$(var.ArchArchDir)\swiftrtd.obj" />
      </Component>
      -->
    </ComponentGroup>

    <ComponentGroup Id="AuxiliaryFiles" Directory="WindowsSDK_usr_share">
      <Component>
        <File Source="$(var.SDK_ROOT)\usr\share\ucrt.modulemap" />
      </Component>
      <Component Directory="WindowsSDK_usr_share">
        <File Source="$(var.SDK_ROOT)\usr\share\winsdk.modulemap" />
      </Component>
      <Component Directory="WindowsSDK_usr_share">
        <File Source="$(var.SDK_ROOT)\usr\share\vcruntime.apinotes" />
      </Component>
      <Component Directory="WindowsSDK_usr_share">
        <File Source="$(var.SDK_ROOT)\usr\share\vcruntime.modulemap" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="Configuration">
      <Component Directory="WindowsSDK">
        <File Source="$(var.SDK_ROOT)\SDKSettings.plist" />
      </Component>
      <Component Directory="WindowsPlatform">
        <File Source="$(var.PLATFORM_ROOT)\Info.plist" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="EnvironmentVariables">
      <Component Id="SystemEnvironmentVariables" Condition="ALLUSERS=1" Directory="INSTALLDIR" Guid="bd3ddc62-4c5c-4f6b-806e-02d2c6a65b65">
        <!-- <Condition> %PROCESSOR_ARCHITECTURE~="arm64" </Condition> -->
        <Environment Id="SystemSDKRoot" Action="set" Name="SDKROOT" Part="all" Permanent="no" System="yes" Value="[INSTALLDIR]Platforms\Windows.platform\Developer\SDKs\Windows.sdk" />
      </Component>
      <Component Id="UserEnvironmentVariables" Condition="NOT ALLUSERS=1" Directory="INSTALLDIR" Guid="580f1edd-8744-4be8-8dd8-e519f70a91e4">
        <!-- <Condition> %PROCESSOR_ARCHITECTURE~="arm64" </Condition> -->
        <Environment Id="UserSDKRoot" Action="set" Name="SDKROOT" Part="all" Permanent="no" System="no" Value="[INSTALLDIR]Platforms\Windows.platform\Developer\SDKs\Windows.sdk" />
      </Component>
    </ComponentGroup>

    <!-- Features -->
    <Feature Id="SDK" AllowAbsent="no" Title="!(loc.Sdk_ProductName_$(var.ProcessorArchitecture))">
      <ComponentGroupRef Id="XCTest" />
      <ComponentGroupRef Id="SwiftRemoteMirror" />
      <ComponentGroupRef Id="BlocksRuntime" />
      <ComponentGroupRef Id="libdispatch" />
      <ComponentGroupRef Id="_Concurrency" />
      <ComponentGroupRef Id="_Differentiation" />
      <ComponentGroupRef Id="_RegexParser" />
      <ComponentGroupRef Id="_StringProcessing" />
      <ComponentGroupRef Id="CRT" />
      <ComponentGroupRef Id="Cxx" />
      <ComponentGroupRef Id="Distributed" />
      <ComponentGroupRef Id="Foundation" />
      <ComponentGroupRef Id="FoundationXML" />
      <ComponentGroupRef Id="FoundationNetworking" />
      <ComponentGroupRef Id="Swift" />
      <ComponentGroupRef Id="SwiftOnoneSupport" />
      <ComponentGroupRef Id="WinSDK" />
      <ComponentGroupRef Id="libcxxshim" />
      <ComponentGroupRef Id="Registrar" />
      <ComponentGroupRef Id="AuxiliaryFiles" />
      <ComponentGroupRef Id="Configuration" />
      <ComponentGroupRef Id="SwiftShims" />
      <ComponentGroupRef Id="EnvironmentVariables" />
    </Feature>
  </Package>
</Wix>
