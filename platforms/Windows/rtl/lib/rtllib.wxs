<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">

  <Fragment>
    <?if $(sys.BUILDARCH) == x86 ?>
      <?define RuntimeDirectoryComponentGuidGenerationSeed = "79856274-E0F9-4602-A56A-A8DE16C05C41" ?>
    <?elseif $(sys.BUILDARCH) == x64 ?>
      <?define RuntimeDirectoryComponentGuidGenerationSeed = "89EC12D8-2E04-41C5-9685-C38DA162A2DA" ?>
    <?elseif $(sys.BUILDARCH) == arm64 ?>
      <?define RuntimeDirectoryComponentGuidGenerationSeed = "E9BC660F-2E0E-48E4-8DE0-18567335AF6B" ?>
    <?endif?>

    <Directory Id="RUNTIMEDIR_$(ProductArchitecture)" ComponentGuidGenerationSeed="$(RuntimeDirectoryComponentGuidGenerationSeed)" />

    <ComponentGroup Id="SwiftRuntimeComponents_$(ProductArchitecture)" Directory="RUNTIMEDIR_$(ProductArchitecture)">
      <Component Id="SwiftSynchronizationComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftSynchronization.dll" />
      </Component>
      <Component Id="SwiftConcurrencyComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swift_Concurrency.dll" />
      </Component>
      <Component Id="SwiftDifferentiationComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swift_Differentiation.dll" />
      </Component>
      <Component Id="SwiftDistributedComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftDistributed.dll" />
      </Component>
      <Component Id="SwiftRegexBuilderComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftRegexBuilder.dll" />
      </Component>
      <Component Id="SwiftRegexParserComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swift_RegexParser.dll" />
      </Component>
      <Component Id="SwiftStringProcessingComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swift_StringProcessing.dll" />
      </Component>
      <Component Id="SwiftCoreComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftCore.dll" />
      </Component>
      <Component Id="SwiftCRTComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftCRT.dll" />
      </Component>
      <Component Id="SwiftObservationComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftObservation.dll" />
      </Component>
      <Component Id="SwiftRemoteMirrorComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftRemoteMirror.dll" />
      </Component>
      <Component Id="SwiftSwiftOnoneSupportComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftSwiftOnoneSupport.dll" />
      </Component>
      <Component Id="SwiftWinSDKComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftWinSDK.dll" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="BlocksRuntimeComponents_$(ProductArchitecture)" Directory="RUNTIMEDIR_$(ProductArchitecture)">
      <Component Id="BlocksRuntimeComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\BlocksRuntime.dll" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="LibDispatchComponents_$(ProductArchitecture)" Directory="RUNTIMEDIR_$(ProductArchitecture)">
      <Component Id="DispatchComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\dispatch.dll" />
      </Component>
      <Component Id="SwiftDispatchComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\swiftDispatch.dll" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="FoundationComponents_$(ProductArchitecture)" Directory="RUNTIMEDIR_$(ProductArchitecture)">
      <Component Id="FoundationComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\Foundation.dll" />
      </Component>
      <Component Id="FoundationNetworkingComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\FoundationNetworking.dll" />
      </Component>
      <Component Id="FoundationXMLComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\FoundationXML.dll" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="PlutilComponents_$(ProductArchitecture)" Directory="RUNTIMEDIR_$(ProductArchitecture)">
      <Component Id="PlutilComponent" Guid="{INSERT_GUID_HERE}">
        <File Source="$(SDK_ROOT)\usr\bin\plutil.exe" />
      </Component>
    </ComponentGroup>

    <ComponentGroup Id="SwiftRuntime_$(ProductArchitecture)">
      <ComponentGroupRef Id="SwiftRuntimeComponents_$(ProductArchitecture)" />
      <ComponentGroupRef Id="BlocksRuntimeComponents_$(ProductArchitecture)" />
      <ComponentGroupRef Id="LibDispatchComponents_$(ProductArchitecture)" />
      <ComponentGroupRef Id="FoundationComponents_$(ProductArchitecture)" />
      <ComponentGroupRef Id="PlutilComponents_$(ProductArchitecture)" />
    </ComponentGroup>
  </Fragment>
</Wix>
