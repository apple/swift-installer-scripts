<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs" xmlns:ui="http://wixtoolset.org/schemas/v4/wxs/ui">
  <Package
      Language="1033"
      Manufacturer="swift.org"
      Name="swift-inspect"
      UpgradeCode="269fd791-fb3d-4311-96a1-cb98243ee857"
      Version="$(var.ProductVersion)"
      Scope="perMachine">

    <MediaTemplate CabinetTemplate="insp{0}.cab" />

    <!-- WindowsVolume is not a StandardDirectory value, but rather a standard property. See https://github.com/wixtoolset/issues/issues/7314 -->
    <SetDirectory Id="WINDOWSVOLUME" Value="[WindowsVolume]" />

    <Directory ComponentGuidGenerationSeed="4541e7ac-4bf7-47f5-adb2-d3f63006cdcb" Id="WINDOWSVOLUME">
      <Directory Id="INSPECTINSTALLDIR">
        <Directory Name="Library">
          <Directory Name="Developer">
            <Directory Id="Tools" Name="Tools" />
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <Component Id="swift_inspect.exe" Directory="Tools">
      <File Source="$(var.SWIFT_INSPECT_BUILD)\swift-inspect.exe" />
    </Component>

    <Component Id="EnvironmentVariables" Guid="61ddbfd1-4051-4964-8a9b-fd0299a358f3" Directory="Tools">
      <Environment Id="Path" Action="set" Name="Path" Part="last" Permanent="no" System="yes" Value="[Tools]" />
    </Component>

    <Feature Id="SwiftInspect" AllowAbsent="no" ConfigurableDirectory="INSPECTINSTALLDIR" Title="SwiftInspect">
      <ComponentRef Id="swift_inspect.exe" />
      <ComponentRef Id="EnvironmentVariables" />
    </Feature>
  </Package>
</Wix>
