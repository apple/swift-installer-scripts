<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs" xmlns:bal="http://wixtoolset.org/schemas/v4/wxs/bal">
  <Bundle
    Name="!(loc.BundleName)"
    Version="$(var.ProductVersion)"
    Manufacturer="swift.org"
    Compressed="yes"
    UpgradeCode="710F1827-DA4A-4BF4-BDCE-D5F2D7C0DEF2">

    <!-- This bundle should also upgrade the "old" bundles. -->
    <RelatedBundle Id="8c75f32a-7bdf-4c61-abf6-c7e1c4b8fbf6" Action="upgrade" />
    <RelatedBundle Id="151d42d9-8877-4b72-ac62-4695243a35c1" Action="upgrade" />

    <BootstrapperApplication>
      <bal:WixStandardBootstrapperApplication
      LicenseUrl="https://www.swift.org/LICENSE.txt"
      LogoFile="Resources/swift.png"
      SuppressOptionsUI="yes"
      SuppressRepair="no"
      Theme="hyperlinkLicense" />
    </BootstrapperApplication>

    <Chain>
      <MsiPackage SourceFile="!(bindpath.rt)\runtime.msi" Name="$(sys.BUILDARCHSHORT)\runtime.msi" />
      <MsiPackage SourceFile="!(bindpath.bld)\bld.msi" Name="$(sys.BUILDARCHSHORT)\bld.msi" />
      <MsiPackage SourceFile="!(bindpath.cli)\cli.msi" Name="$(sys.BUILDARCHSHORT)\cli.msi" />
      <MsiPackage SourceFile="!(bindpath.dbg)\dbg.msi" Name="$(sys.BUILDARCHSHORT)\dbg.msi" />
      <MsiPackage SourceFile="!(bindpath.ide)\ide.msi" Name="$(sys.BUILDARCHSHORT)\ide.msi" />
      <MsiPackage SourceFile="!(bindpath.fmt)\swift-format.msi" Name="$(sys.BUILDARCHSHORT)\swift-format.msi" />
      <MsiPackage SourceFile="!(bindpath.ins)\swift-inspect.msi" Name="$(sys.BUILDARCHSHORT)\swift-inspect.msi" />
      <MsiPackage Id="Sdk86"  SourceFile="!(bindpath.sdkx86)\sdk.msi" Name="X86\sdk.msi" />
      <MsiPackage Id="SdkA64" SourceFile="!(bindpath.sdka64)\sdk.msi" Name="A64\sdk.msi" />
      <MsiPackage Id="SdkX64" SourceFile="!(bindpath.sdkx64)\sdk.msi" Name="X64\sdk.msi" />
    </Chain>
  </Bundle>
</Wix>
